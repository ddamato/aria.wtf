---
const { family } = Astro.props;
---

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href={ `https://fonts.googleapis.com/css2?family=${family.replace(/\s/g, '+')}&display=swap` } rel="stylesheet">
<script>
  (function(){
    const link = document.head.querySelector('link[href*="fonts.googleapis.com"][rel="stylesheet"]');
    const { searchParams } = new URL(link.href);
    const style = document.createElement('style');
    style.textContent = `body { font-family: '${searchParams.get('family').replace(/\+/g, ' ')}', sans-serif }`;
    document.head.appendChild(style);
  })()
</script>